<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Realm of Echoes</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      font-family: 'Segoe UI', sans-serif;
      background-color: #000;
    }

    #landing {
      position: absolute;
      z-index: 10;
      width: 100%;
      height: 100%;
      background: url('123.jpg') no-repeat center center;
      background-size: cover;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      backdrop-filter: brightness(0.6); /* Optional: darkens image */
    }

    #landing h1 {
      font-size: 3rem;
      margin-bottom: 1rem;
      text-shadow: 2px 2px 5px black;
    }

    #landing p {
      font-size: 1.2rem;
      max-width: 600px;
      margin-bottom: 2rem;
      text-shadow: 1px 1px 4px black;
    }

    #landing button {
      font-size: 1.2rem;
      padding: 0.8em 2em;
      border: none;
      border-radius: 8px;
      background-color: #00bcd4;
      color: white;
      cursor: pointer;
      transition: background 0.3s;
    }

    #landing button:hover {
      background-color: #0097a7;
    }

    #vr-world {
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>

  <!-- Landing Page -->
  <div id="landing">
    <h1>THE REALM OF ECHOES</h1>
    <p>Get ready to explore! Put on your headset and click below to enter the immersive Realm of Echoes.</p>
    <button onclick="startGame()">Play</button>
  </div>

  <!-- Placeholder for the Frame scene -->
  <div id="vr-world"></div>

  <script>
    function startGame() {
      // Hide landing
      document.getElementById('landing').style.display = 'none';

      // Inject the Frame scene into the page
      document.getElementById('vr-world').innerHTML = `
        <frame-scene>
          <frame-room color="#222" size="10 4 10"></frame-room>
          <frame-light type="ambient" intensity="0.8"></frame-light>
          <frame-light type="directional" position="1 3 2"></frame-light>
          <frame-box position="0 1 -3" color="#4caf50" size="1 1 1"></frame-box>
          <frame-text value="Hello VR!" position="0 2 -3" color="white" align="center"></frame-text>
        </frame-scene>
      `;
    }
  </script>




<script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
<script src="https://rawgit.com/donmccurdy/aframe-extras/v2.1.1/dist/aframe-extras.loaders.min.js"></script> 
<script src="https://unpkg.com/aframe-super-hands-component@4.0.5/dist/aframe-super-hands-component.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v3.3.0/dist/aframe-physics-system.min.js"></script>
  
</head>
    <body>
      <a-scene physics="gravity: -9.8">
        <a-entity camera="" position="-0.09549 1.6 -0.37926" wasd-controls="acceleration: 20" rotation="0 -180 0" look-controls="" aframe-injected="" data-aframe-inspector-original-camera=""></a-entity>
        <a-entity laser-controls="hand: right" super-hands></a-entity>
        <a-entity laser-controls="hand: left" raycaster="objects: .clickable"></a-entity>

       <!-- Fluffy Cloud Made of Spheres -->
<a-entity id="cloud1" position="10 25 -30">
  <a-sphere radius="2" position="0 0 0" color="#ffffff" opacity="0.8"></a-sphere>
  <a-sphere radius="1.8" position="2 0.2 0" color="#ffffff" opacity="0.8"></a-sphere>
  <a-sphere radius="1.5" position="-2 0.1 0.5" color="#ffffff" opacity="0.8"></a-sphere>
  <a-sphere radius="1.4" position="1 -0.5 1.5" color="#ffffff" opacity="0.8"></a-sphere>
  <a-sphere radius="1.2" position="-1.5 -0.2 -1" color="#ffffff" opacity="0.8"></a-sphere>
</a-entity>

        <a-sky color="lightblue" material="" geometry="" ></a-sky>     
      <a-entity id="sun" ply-model="src: Sun.ply" position="3290.7831621123723 150 28.198" rotation="-90 90 0" scale="" light="color: #ffffff; groundColor: #ffffff; decay: 1.15" animation="dir: normal; from: 3300 150 28.198; property: position; dur: 180000; loop: true; to: -3300 150 28.198"></a-entity>

</body>
</html>

      <a-entity id="wall"ply-model="src: wall.ply" position="3.18 0 6.02" rotation="-90 0 0"></a-entity>
      <a-entity id="wall3"ply-model="src: wall3.ply" position="3.13673 0 6.00004" rotation="-90 0 0"></a-entity>
      <a-entity id="wall3"ply-model="src: wall3.ply" position="-2.8884 0 4.46061" rotation="-90 180 0"></a-entity>      
      <a-entity id="wall3"ply-model="src: wall3.ply" position="-2.8884 0 4.46061" rotation="-90 180 0"></a-entity>
      <a-entity id="wall"ply-model="src: wall.ply" position="-3.07 0 4.47" rotation="-90 180 0"></a-entity>
      <a-entity id="door holder"ply-model="src: door holder.ply" position="3.18867 0 6.12" rotation="-90 0 0"></a-entity>
      <a-entity id="door holder2"ply-model="src: door holder2.ply" position="3.13701 0 6.09954" rotation="-90 0 0"></a-entity>
      <a-entity id="door holder2"ply-model="src: door holder2.ply" position="-3.01097 0 4.361" rotation="-90 180 0"></a-entity>
      <a-entity id="door holder"ply-model="src: door holder.ply" position="-3.03768 0 4.361" rotation="-90 180 0"></a-entity>
      <a-entity id="lake2"ply-model="src: lake2.ply" position="2.59 -0.17 -6.45" rotation="-90 0 0"></a-entity> 
      <a-entity id="lake" ply-model="src: lake.ply" position="2.5 -0.17 16.24555" rotation="-90 0 0"></a-entity>
      <a-entity id="lake2 "ply-model="src: lake2.ply" position="2.56 -0.17 -12.17" rotation="-90 0 0"></a-entity>
      <a-entity id="lake2" ply-model="src: lake2.ply" position="-2.35979 -0.17 4.09536" rotation="-90 180 0"></a-entity>
      <a-entity id="lake" ply-model="src: lake.ply" position="-2.34405 -0.17 4.63875" rotation="-90 180 0"></a-entity>
      <a-entity id="lake" ply-model="src: lake.ply" position="-2.39399 -0.14 -13.65844" rotation="-90 180 0"></a-entity>
      <a-entity id="lake" ply-model="src: lake.ply" position="-2.39399 -0.14 12.34796" rotation="-90 180 0"></a-entity>
      <a-entity id="trees" ply-model="src: trees.ply" position="53.082 -0.170 -0.97238" rotation="-90 0 0"></a-entity>
      <a-entity id="trees" ply-model="src: trees.ply" position="53.015 -0.170 -13.56916" rotation="-90 0 0"></a-entity>      
      <a-entity id="trees" ply-model="src: trees.ply" position="52.94836 -0.170 -26.106" rotation="-90 0 0"></a-entity>
      <a-entity id="trees" ply-model="src: trees.ply" position="40.39836 -0.170 -26.106" rotation="-90 0 0"></a-entity>
      <a-entity id="trees" ply-model="src: trees.ply" position="15.28836 -0.170 -26.106" rotation="-90 0 0"></a-entity>
      <a-entity id="trees" ply-model="src: trees.ply" position="2.928 -0.170 -26.106" rotation="-90 0 0"></a-entity>
      <a-entity id="trees" ply-model="src: trees.ply" position="3.18 -0.170 -13.89033" rotation="-90 0 0"></a-entity>
      <a-entity id="trees" ply-model="src: trees.ply" position="2.928 -0.170 -1.45774" rotation="-90 0 0"></a-entity>
      <a-entity id="trees" ply-model="src: trees.ply" position="2.928 -0.170 10.86639" rotation="-90 0 0"></a-entity>
      <a-entity id="trees" ply-model="src: trees.ply" position="2.938 -0.170 23.42639" rotation="-90 0 0"></a-entity>
      <a-entity id="trees" ply-model="src: trees.ply" position="53.082 -0.170 11.56762" rotation="-90 0 0"></a-entity>
      <a-entity id="trees" ply-model="src: trees.ply" position="53.082 -0.170 24.14" rotation="-90 0 0"></a-entity>
      <a-entity id="trees" ply-model="src: trees.ply" position="15.498 -0.170 23.42639" rotation="-90 0 0"></a-entity>
      <a-entity id="trees" ply-model="src: trees.ply" position="40.59 -0.170 23.42639" rotation="-90 0 0"></a-entity>
      <a-entity id="plain" ply-model="src: floor (2).ply" position="27.79487 -0.17 98.937" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="28.36487 -0.170 98.84655" rotation="-90 0 0"></a-entity>
      <a-entity id="road" ply-model="src: road.ply" position="9.285 -6.51512 43.81736" rotation="-90 0 0" scale="1.03 1 1"></a-entity>
      <a-entity id="road" ply-model="src: road.ply" position="9.285 -6.515 54.1396" rotation="-90 0 0" scale="1.03 1 1"></a-entity>
      <a-entity id="road-4" ply-model="src: road.ply" position="9.57066 -6.45001 -20.58967" rotation="-90 0 0" scale="1.09 1 1"></a-entity>
      <a-entity id="road-4" ply-model="src: road.ply" position="9.57066 -6.45001 -8.23922" rotation="-90 0 0" scale="1.09 1 1"></a-entity>
      <a-entity id="road-1" ply-model="src: City (House) - Copy.ply" position="9.26384 -6.40219 31.3041" rotation="-90 0 0" scale="1.03 1.15 1"></a-entity>
      <a-entity id="road-2" ply-model="src: City (House) - Copy.ply" position="8.90032 -6.582 11.38064" rotation="-90 0 0" scale="1 0.93 1"></a-entity>
      <a-entity id="road-3" ply-model="src: City (House) - Copy.ply" position="9.57939 -6.4503 -6.07224" rotation="-90 0 0" scale="1.09 0.2 1"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="3.44487 -0.170 98.85655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="-8.96 -0.170 98.85655" rotation="-90 0 0" scale="1.02 1 1"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="40.70487 -0.170 111.42655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="28.15487 -0.170 111.42655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="-9.35 -0.170 111.42655" rotation="-90 0 0"></a-entity>
      <a-entity id="plain" ply-model="src: floor (2).ply" position="-1.42 -0.170 169.49" rotation="-90 0 0" scale="2 2 1"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="-9.35 -0.170 123.99655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="28.3 -0.170 123.99655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="40.88 -0.170 123.99655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="-9.35 -0.170 136.53655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="3.19 -0.170 136.53655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="40.78 -0.170 136.53655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="28.22 -0.170 136.53655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="-21.8077 -0.17 136.53655" rotation="-90 0 0"></a-entity>      
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="53.3936 -0.17 136.53655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="53.3936 -0.17 124.01655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="53.3136 -0.17 111.44655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="53.2736 -0.17 98.86655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="53.2936 -0.17 86.39655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="53.2236 -0.17 73.79655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="53.2336 -0.17 61.19" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="53.2436 -0.17 48.59" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="53.13836 -0.17 36.84" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="-21.8077 -0.17 123.92655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="-21.8077 -0.17 111.34655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="-21.8077 -0.17 98.85655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="-21.8077 -0.17 86.26" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="-21.8077 -0.17 73.69" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="-21.8077 -0.17 61.06" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="-21.8077 -0.17 48.48" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="-21.8077 -0.17 36.65" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="15.62 -0.170 136.53655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees-2" ply-model="src: deep tree.ply" position="-21.8077 -0.17 24.37538" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees-2" ply-model="src: deep tree.ply" position="-9.32559 -0.17 24.37538" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees-2" ply-model="src: deep tree.ply" position="3.16928 -0.17 24.37538" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees-2" ply-model="src: deep tree.ply" position="53.13836 -0.17 24.44051" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees-2" ply-model="src: deep tree.ply" position="28.32313 -0.17 24.44051" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees-2" ply-model="src: deep tree.ply" position="40.66228 -0.17 24.44051" rotation="-90 0 0"></a-entity>
      <a-entity id="huge tree top" ply-model="src: huge tree top.ply" position="-12.52 3.26 134.51" rotation="-90 0 0" scale="1.5 1.5 1"></a-entity>
      <a-entity id="huge tree bottom" ply-model="src: hudge tree bottom.ply" position="-9.72 -0.36 111.41" rotation="-90 0 0" scale="1 1 1.35"></a-entity>
      <!-- Teleport Plate -->
      <a-cylinder id="ground-plate" position="-5.14265 0.44343 64.34183" radius="0.5" height="0.1" color="green" teleport-ui="target: #top-plate; message: Do you want to teleport to the top of the sacred tree of ancient?" material="" geometry=""></a-cylinder>
      <a-cylinder id="top-plate" position="-3.65745 14.68961 65.13497" radius="0.5" height="0.1" color="blue" teleport-ui="target: #ground-plate; message: Would you like to teleport to the ground?" material="" geometry=""></a-cylinder>
      <script>
  AFRAME.registerComponent('teleport-ui', {
    schema: {
      target: { type: 'selector' },
      message: { type: 'string' }
    },
    init: function () {
      this.el.addEventListener('mouseenter', () => {
        if (!document.querySelector('#teleport-ui')) {
          this.createUI();
        }
      });
    },
    createUI: function () {
      const scene = this.el.sceneEl;
      const rig = document.querySelector('#rig');
      const ui = document.createElement('a-entity');
      ui.setAttribute('id', 'teleport-ui');
      ui.setAttribute('position', `${rig.object3D.position.x} ${rig.object3D.position.y} ${rig.object3D.position.z - 1}`);
      ui.setAttribute('rotation', '0 0 0');

      // Background panel
      const panel = document.createElement('a-plane');
      panel.setAttribute('width', '2.5');
      panel.setAttribute('height', '1');
      panel.setAttribute('color', '#111');
      panel.setAttribute('opacity', '0.8');
      ui.appendChild(panel);

      // Message
      const message = document.createElement('a-text');
      message.setAttribute('value', this.data.message);
      message.setAttribute('align', 'center');
      message.setAttribute('position', '0 0.3 0.01');
      message.setAttribute('width', '2.2');
      ui.appendChild(message);

      // Yes Button
      const yesBtn = document.createElement('a-plane');
      yesBtn.setAttribute('position', '-0.6 -0.3 0.01');
      yesBtn.setAttribute('width', '0.8');
      yesBtn.setAttribute('height', '0.3');
      yesBtn.setAttribute('color', '#0f0');
      yesBtn.setAttribute('class', 'clickable');
      yesBtn.setAttribute('teleport-choice', `target: ${this.data.target.id}; confirmed: true`);
      yesBtn.appendChild(this.createText('YES'));
      ui.appendChild(yesBtn);

      // No Button
      const noBtn = document.createElement('a-plane');
      noBtn.setAttribute('position', '0.6 -0.3 0.01');
      noBtn.setAttribute('width', '0.8');
      noBtn.setAttribute('height', '0.3');
      noBtn.setAttribute('color', '#f00');
      noBtn.setAttribute('class', 'clickable');
      noBtn.setAttribute('teleport-choice', `confirmed: false`);
      noBtn.appendChild(this.createText('NO'));
      ui.appendChild(noBtn);

      scene.appendChild(ui);
    },
    createText: function (textValue) {
      const text = document.createElement('a-text');
      text.setAttribute('value', textValue);
      text.setAttribute('align', 'center');
      text.setAttribute('color', 'white');
      text.setAttribute('width', '0.8');
      text.setAttribute('position', '0 0 0.01');
      return text;
    }
  });

  AFRAME.registerComponent('teleport-choice', {
    schema: {
      target: { type: 'string', default: '' },
      confirmed: { type: 'boolean' }
    },
    init: function () {
      this.el.addEventListener('click', () => {
        const ui = document.querySelector('#teleport-ui');
        if (ui) ui.parentNode.removeChild(ui);
        if (this.data.confirmed && this.data.target) {
          const target = document.querySelector(`#${this.data.target}`);
          const rig = document.querySelector('#rig');
          if (target && rig) {
            const pos = target.getAttribute('position');
            rig.setAttribute('position', `${pos.x} ${pos.y + 1.5} ${pos.z}`);
          }
        }
      });
    }
  });
</script>


      <a-entity id="deep plain" ply-model="src: floor (2).ply" position="6.76 -0.17 82.66" rotation="-90 0 0" scale="3 1.14 1"></a-entity>
      <a-entity id="house1-2" ply-model="src: house 1.ply" position="-7.9549 13.57778 67.73566" rotation="-90 -90 90" scale="0.5 0.5 0.5"></a-entity>
      <a-entity id="house1-2" ply-model="src: house 1.ply" position="-7.9549 13.57778 66.65328" rotation="-90 -90 90" scale="0.5 0.5 0.5"></a-entity>     
      <a-entity id="house1" ply-model="src: house 1.ply" position="3.07021 -1.67861 3.89968" rotation="-90 -90 90" scale="0.8 0.8 1"></a-entity>
      <a-entity id="house1" ply-model="src: house 1.ply" position="3.07021 -1.67861 1.94968" rotation="-90 -90 90" scale="0.8 0.8 1"></a-entity>
      <a-entity id="house1" ply-model="src: house 1.ply" position="3.07021 -1.67861 5.85968" rotation="-90 -90 90" scale="0.8 0.8 1"></a-entity>
      <a-entity id="house1" ply-model="src: house 1.ply" position="1.24958 -1.73744 7.7873" rotation="-90 -90 90" scale="1.31 0.8 1"></a-entity>      
      <a-entity id="waterfountain" ply-model="src: waterfountain.ply" position="-3.63 -0.936 8.8" rotation="-90 0 0" scale="0.6 0.6 0.6"></a-entity>
      <a-entity id="bench-1" ply-model="src: bench.ply" position="-0.19405 -0.59 7.34046" rotation="-90 90 0" scale="0.5 0.41 0.41"></a-entity>
      <a-entity id="bench-2" ply-model="src: bench.ply" position="-0.19405 -0.59 5.91555" rotation="-90 90 0" scale="0.5 0.41 0.41"></a-entity>
      <a-entity id="bench-3" ply-model="src: bench.ply" position="0.21595 -0.59 2.17871" rotation="-90 -90 0" scale="0.5 0.41 0.41"></a-entity>
      <a-entity id="bench-4" ply-model="src: bench.ply" position="0.21595 -0.59 3.67484" rotation="-90 -90 0" scale="0.5 0.41 0.41"></a-entity>
      <a-entity id="Rubbish Bin-1" ply-model="src: Rubish Bin.ply" position="-0.86046 -0.30635 5.973" rotation="-90 90 0" scale="0.3 0.3 0.3"></a-entity>
      <a-entity id="Rubish Bin-2" ply-model="src: Rubish Bin.ply" position="3.34129 -0.306 5.973" rotation="-90 90 0" scale="0.3 0.3 0.3"></a-entity>
     
      <a-entity id="Road Light Pole-1" ply-model="src: Road light pole.ply" position="-0.89131 -0.70064 4.13198" rotation="-90 90 0" scale="0.5 0.5 0.5"></a-entity>
      <a-box position="-1.77187 1.62549 6.20633" color="yellow" material="" geometry="" scale="0.14 0.1 0.15" id="Bulb-1" light="color: #ffffff; intensity: 0.15; type: point" animation__light="" intensity="dir:  alternate;  dur:  60000;  from:  0.15;  property:  light intensity ;  startEvents:  ;  pauseEvents:  ;  resumeEvents:  ;  to:  0 loop= true"></a-box>

      <a-entity id="Road Light Pole-2" ply-model="src: Road light pole.ply" position="-0.89131 -0.70064 7.03198" rotation="-90 90 0" scale="0.5 0.5 0.5"></a-entity>
      <a-box position="-1.77187 1.62347 3.30444" color="yellow" material="" geometry="" scale="0.14 0.1 0.15" id="Bulb-2" light="color: #ffffff; intensity: 0.15; type: point" animation__light="" intensity="dir:  alternate;  dur:  60000;  from:  0.15;  property:  light intensity ;  startEvents:  ;  pauseEvents:  ;  resumeEvents:  ;  to:  0 loop= true"></a-box>

      <a-entity id="Road Light Pole-3" ply-model="src: Road light pole.ply" position="0.92772 -0.70064 5.392" rotation="-90 -90 0" scale="0.5 0.5 0.5"></a-entity>
      <a-box position="1.80269 1.62569 6.21628" color="yellow" material="" geometry="" scale="0.14 0.1 0.15" id="Bulb-3" light="color: #ffffff; intensity: 0.15; type: point" animation__light="" intensity="dir:  alternate;  dur:  60000;  from:  0.15;  property:  light intensity ;  startEvents:  ;  pauseEvents:  ;  resumeEvents:  ;  to:  0 loop= true"></a-box>

      <a-entity id="Road Light Pole-4" ply-model="src: Road light pole.ply" position="0.928 -0.70064 2.472" rotation="-90 -90 0" scale="0.5 0.5 0.5"></a-entity>      
      <a-box position="1.80269 1.62606 3.29616" color="yellow" material="" geometry="" scale="0.14 0.1 0.15" id="Bulb-4" light="color: #ffffff; intensity: 0.15; type: point" animation__light="" intensity="dir:  alternate;  dur:  60000;  from:  0.15;  property:  light intensity ;  startEvents:  ;  pauseEvents:  ;  resumeEvents:  ;  to:  0 loop= true"></a-box>

      <a-entity id="Road Light Pole-5" ply-model="src: Road light pole.ply" position="0.34926 -0.57245 15.96235" rotation="-90 -90 0" scale="0.5 0.5 0.5"></a-entity>
      <a-box position="1.23585 1.73134 16.78814" color="yellow" material="" geometry="" scale="0.14 0.1 0.15" id="Bulb-5" light="color: #ffffff; intensity: 0.3; type: point" animation__light="" intensity="dir:  alternate;  dur:  60000;  from:  0.30;  property:  light intensity ;  startEvents:  ;  pauseEvents:  ;  resumeEvents:  ;  to:  0 loop= true"></a-box>

      <a-entity id="Road Light Pole-6" ply-model="src: Road light pole.ply" position="0.05809 -0.572 17.56302" rotation="-90 90 0" scale="0.5 0.5 0.5"></a-entity>
      <a-box position="-0.83684 1.73134 16.73421" color="yellow" material="" geometry="" scale="0.14 0.1 0.15" id="Bulb-6" light="color: #ffffff; intensity: 0.3; type: point" animation__light="" intensity="dir:  alternate;  dur:  60000;  from:  0.30;  property:  light intensity ;  startEvents:  ;  pauseEvents:  ;  resumeEvents:  ;  to:  0 loop= true"></a-box>

      <a-entity id="Road Light Pole-7" ply-model="src: Road light pole.ply" position="-0.20891 -0.6005 -5.62868" rotation="-90 90 0" scale="0.5 0.5 0.5"></a-entity>
      <a-box position="-1.09824 1.72224 -6.44877" color="yellow" material="" geometry="" scale="0.14 0.1 0.15" id="Bulb-7" light="color: #ffffff; intensity: 0.25; type: point" animation__light="" intensity="dir:  alternate;  dur:  60000;  from:  0.25;  property:  light intensity ;  startEvents:  ;  pauseEvents:  ;  resumeEvents:  ;  to:  0 loop= true"></a-box>

      <a-entity id="Road Light Pole-8" ply-model="src: Road light pole.ply" position="0.17549 -0.5559 -7.40402" rotation="-90 -90 0" scale="0.5 0.5 0.5"></a-entity>
     
      <a-entity id="resturent" ply-model="src: resturent.ply" position="1.16599 -1.91678 9.87848" rotation="-90 90 0" scale=""></a-entity>
      
      










      
        <!-- Rock (PLY model) -->
        <a-box id=3 radius="1.1" scale="1 0.7 1" position="27.6 0.6 46.5" material="color: #3a3a3a; roughness: 1; metalness: 0"></a-box>
        <a-box depth="1.2" height="0.8" width="0.6" position="27.40285 0.6 47.37866" rotation="18.95 -0.64 10" material="color: #3a3a3a; roughness: 1" geometry="" scale="1 1 0.87" id="5"></a-box>
        <!-- Side boulders -->
        
      <a-box id="1" depth="1.2" height="0.8" width="0.6" position="28.20397 1.17304 46.48131" rotation="" material="color: #3a3a3a; roughness: 1" geometry="" scale="0.52 1.4 1.25"></a-box>
      <a-box id="2" depth="1.2" height="0.8" width="0.6" position="27.570 0.6 45.83" rotation="20 29.999999999999996 10" material="color: #3a3a3a; roughness: 1" geometry=""></a-box>
      <a-box id="4" position="1.04913 1.77938 -6.5749" color="yellow" material="" geometry="" scale="0.14 0.1 0.15" id="Bulb-8" light="color: #f5ec00; intensity: 0.25; type: point" animation__light="" intensity="dir:  alternate;  dur:  60000;  from:  0.25;  property:  light intensity ;  startEvents:  ;  pauseEvents:  ;  resumeEvents:  ;  to:  0 loop= true"></a-box>
      <a-box id="6" depth="1.2" height="0.8" width="0.6" position="27.74983 0.48126 45.39594" rotation="41.2 29.999999999999996 14.2" material="color: #3a3a3a; roughness: 1" geometry=""></a-box>
      <a-box id="6" depth="1.2" height="0.8" width="0.6" position="27.74983 0.48126 45.39594" rotation="-41.2 -29.999999999999996 -14.2" material="color: #3a3a3a; roughness: 1" geometry=""></a-box>
      <a-tetrahedron id="7" radius="0.6" position="28.02916 0.58316 45.65131" rotation="10 59.99999999999999 0" material="color: #3a3a3a; roughness: 1" geometry=""></a-tetrahedron>
      <a-box id="8 " depth="1.2" height="0.8" width="0.6" position="27.89807 1.12304 47.33456" rotation="0 -57.89 0" material="color: #3a3a3a; roughness: 1" geometry="" scale="0.49 1.34 0.41"></a-box>
      <a-box id="9" depth="1.2" height="0.8" width="0.6" position="27.8124 1.00447 47.39105" rotation="0 -57.89 0" material="color: #3a3a3a; roughness: 1" geometry="" scale="0.49 1.34 0.41"></a-box>
      <a-box id="10" depth="1.2" height="0.8" width="0.6" position="27.82276 1.12304 45.61474" rotation="0 57.89 0" material="color: #3a3a3a; roughness: 1" geometry="" scale="0.49 1.34 0.41"></a-box>
      <a-box id="11" depth="1.2" height="0.8" width="0.6" position="27.82276 1.01043 45.61474" rotation="0 57.89 0" material="color: #3a3a3a; roughness: 1" geometry="" scale="0.49 1.34 0.41"></a-box>

<!-- Enemy Box -->
<a-box id="enemy-box" color="orange" position="3 0.5 -5" enemy-box></a-box>
<script>
  
  AFRAME.registerComponent('enemy-box', {
    init: function () {
      this.player = document.querySelector('#rig');
      this.sword = document.querySelector('#sword');
      this.active = true;
      this.shootInterval = null;
      this.originalPosition = this.el.getAttribute('position');

      this.checkDistance = this.checkDistance.bind(this);
      this.startShooting = this.startShooting.bind(this);
      this.stopShooting = this.stopShooting.bind(this);
      this.handleSwordCollision = this.handleSwordCollision.bind(this);

      this.sword.addEventListener('collision', (e) => {
        if (e.detail.body.el === this.el && this.active) {
          this.handleSwordCollision();
        }
      });

      this.el.sceneEl.addEventListener('loaded', () => {
        setInterval(this.checkDistance, 1000);
      });
    },

    checkDistance: function () {
      if (!this.active) return;
      const playerPos = this.player.object3D.position;
      const boxPos = this.el.object3D.position;
      const distance = boxPos.distanceTo(playerPos);

      if (distance < 6 && !this.shootInterval) {
        this.startShooting();
      } else if (distance >= 6 && this.shootInterval) {
        this.stopShooting();
      }
    },

    startShooting: function () {
      this.shootInterval = setInterval(() => {
        const projectile = document.createElement('a-box');
        projectile.setAttribute('color', 'red');
        projectile.setAttribute('position', this.el.getAttribute('position'));
        projectile.setAttribute('width', '0.2');
        projectile.setAttribute('height', '0.2');
        projectile.setAttribute('depth', '0.2');
        projectile.setAttribute('dynamic-body', '');

        const direction = new THREE.Vector3().subVectors(
          this.player.object3D.position,
          this.el.object3D.position
        ).normalize().multiplyScalar(5);

        projectile.addEventListener('body-loaded', () => {
          projectile.body.velocity.set(direction.x, direction.y, direction.z);
        });

        projectile.addEventListener('collide', e => {
          if (e.detail.body.el === this.player) {
            this.player.emit('player-hit', { damage: 1 });
            projectile.parentNode.removeChild(projectile);
          }
          if (e.detail.body.el === this.sword) {
            projectile.parentNode.removeChild(projectile);
          }
        });

        this.el.sceneEl.appendChild(projectile);
      }, 2000);
    },

    stopShooting: function () {
      clearInterval(this.shootInterval);
      this.shootInterval = null;
    },

    handleSwordCollision: function () {
      this.active = false;
      this.el.setAttribute('visible', false);
      this.stopShooting();
      setTimeout(() => {
        this.el.setAttribute('visible', true);
        this.active = true;
      }, 180000); // Respawn after 3 minutes
    }
  });
</script> 
      <!-- Sword (PLY model) -->
      
      <a-entity ply-model="src: Sword.ply" id="sword" position="27.3543 2.24336 46.02025" scale="0.1 0.1 0.15" rotation="90 0 0" pullable-sword="" animation="property: position; to: 23.7 -26.2 23.1; easing: easeOutQuad" dynamic-body="sphereRadius: NaN" grabbable="" class="grabbable" velocity=""></a-entity>
            <a-entity id="sword" class="weapon" ply-model="src: url(sword.ply)" dynamic-body stab-stick></a-entity>
            <script>
        AFRAME.registerComponent('pullable-sword', {
          init: function () {
            const sword = this.el;
            let pulled = false;
    
            sword.addEventListener('click', () => {
              if (!pulled) {
                pulled = true;
    
                // Animate upward pull (world position)
                sword.setAttribute('animation', {
                  property: 'position',
                  to: '23.7 -26.2 23.1', // pulled higher in Y
                  dur: 1000,
                  easing: 'easeOutQuad'
                });
    
                setTimeout(() => {
                  sword.removeAttribute('static-body');
                  sword.setAttribute('dynamic-body', '');
                  sword.setAttribute('grabbable', '');
                }, 1000);
              }
            });
          }
        });
    
        document.addEventListener('DOMContentLoaded', () => {
          document.querySelector('#sword').setAttribute('pullable-sword', '');
        });
      </script>


<script>
  AFRAME.registerComponent('stab-stick', {
    init: function () {
      const el = this.el;
      const rig = document.querySelector('#rig');
      const hand = rig.querySelector('[laser-controls][hand="right"]'); // Change to "left" if needed

      let isStuck = true;

      el.addEventListener('grab-start', () => {
        if (!isStuck) return;

        isStuck = false;

        // Release from stone
        el.removeAttribute('static-body');
        el.setAttribute('dynamic-body', 'mass: 1');

        // Animate to hand
        const handPos = new THREE.Vector3();
        hand.object3D.getWorldPosition(handPos);

        el.removeAttribute('animation__fly');
        el.setAttribute('animation__fly', {
          property: 'position',
          to: `${handPos.x} ${handPos.y} ${handPos.z}`,
          dur: 800,
          easing: 'easeOutCubic'
        });

        el.setAttribute('animation__spin', {
          property: 'rotation',
          to: '0 360 0',
          dur: 800
        });

        // Auto attach to hand after flying
        setTimeout(() => {
          hand.emit('grab-start', { hand: hand }); // Simulate grab
        }, 800);
      });
    }
  });
</script>









































      
      
      
      
      
      
      
      
      
      
       
          
        
    </a-scene>
  </body>
</html>
