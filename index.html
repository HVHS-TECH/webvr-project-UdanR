<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Realm of Echoes</title>
  <script src="https://cdn.jsdelivr.net/gh/framevr/frame@1.1.0/dist/frame.js" type="module"></script>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      font-family: 'Segoe UI', sans-serif;
      background-color: #000;
    }

    #landing {
      position: absolute;
      z-index: 10;
      width: 100%;
      height: 100%;
      background: url('123.jpg') no-repeat center center;
      background-size: cover;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      backdrop-filter: brightness(0.6); /* Optional: darkens image */
    }

    #landing h1 {
      font-size: 3rem;
      margin-bottom: 1rem;
      text-shadow: 2px 2px 5px black;
    }

    #landing p {
      font-size: 1.2rem;
      max-width: 600px;
      margin-bottom: 2rem;
      text-shadow: 1px 1px 4px black;
    }

    #landing button {
      font-size: 1.2rem;
      padding: 0.8em 2em;
      border: none;
      border-radius: 8px;
      background-color: #00bcd4;
      color: white;
      cursor: pointer;
      transition: background 0.3s;
    }

    #landing button:hover {
      background-color: #0097a7;
    }

    #vr-world {
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>

  <!-- Landing Page -->
  <div id="landing">
    <h1>THE REALM OF ECHOES</h1>
    <p>Get ready to explore! Put on your headset and click below to enter the immersive Realm of Echoes.</p>
    <button onclick="startGame()">Play</button>
  </div>

  <!-- Placeholder for the Frame scene -->
  <div id="vr-world"></div>

  <script>
    function startGame() {
      // Hide landing
      document.getElementById('landing').style.display = 'none';

      // Inject the Frame scene into the page
      document.getElementById('vr-world').innerHTML = `
        <frame-scene>
          <frame-room color="#222" size="10 4 10"></frame-room>
          <frame-light type="ambient" intensity="0.8"></frame-light>
          <frame-light type="directional" position="1 3 2"></frame-light>
          <frame-box position="0 1 -3" color="#4caf50" size="1 1 1"></frame-box>
          <frame-text value="Hello VR!" position="0 2 -3" color="white" align="center"></frame-text>
        </frame-scene>
      `;
    }
  </script>




<script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
<script src="https://rawgit.com/donmccurdy/aframe-extras/v2.1.1/dist/aframe-extras.loaders.min.js"></script> 
<script src="https://unpkg.com/aframe-super-hands-component@4.0.5/dist/aframe-super-hands-component.min.js"></script>
<script src="https://unpkg.com/aframe-particle-system-component@1.0.9/dist/aframe-particle-system-component.min.js"></script>

  
</head>
    <body>
      <a-scene physics="gravity: -9.8">
        <a-entity camera="" position="-0.09549 1.6 -0.37926" wasd-controls="acceleration: 20" rotation="0 -180 0" look-controls="" aframe-injected="" data-aframe-inspector-original-camera=""></a-entity>
        <a-entity laser-controls="hand: left" super-hands></a-entity>
        <a-entity laser-controls="hand: right" super-hands></a-entity>

            <!-- Player Rig -->
            <a-entity id="rig" position="0 1.6 0" player-health>
              <a-camera>
                <!-- Health Bar UI -->
                <a-entity id="player-ui" position="0 -0.3 -1.5">
                  <a-entity id="health-bar" geometry="primitive: plane; height: 0.1; width: 0.6"
                            material="color: red"
                            position="0 0 0">
                          </a-entity>
                        </a-entity>
                      </a-camera>
                    </a-entity>
      
      
        <a-sky color="lightblue" material="" geometry="" ></a-sky>     
      <a-entity id="sun" ply-model="src: Sun.ply" position="3290.7831621123723 150 28.198" rotation="-90 90 0" scale="" light="color: #ffffff; groundColor: #ffffff; decay: 1.15" animation="dir: normal; from: 3300 150 28.198; property: position; dur: 180000; loop: true; to: -3300 150 28.198"></a-entity>
<!-- Ground -->
<a-plane position="0 0 -4" rotation="-90 0 0" width="50" height="50" color="#7BC8A4" static-body></a-plane>

<script>
  AFRAME.registerComponent('player-health', {
    schema: { max: {default: 6}, current: {default: 6} },
    init: function () {
      this.healthBar = document.querySelector('#health-bar');
      this.el.addEventListener('player-hit', e => {
        this.data.current -= e.detail.damage;
        if (this.data.current < 0) this.data.current = 0;
        this.updateBar();
        if (this.data.current <= 0) this.respawnPlayer();
      });
    },
    updateBar: function () {
      const width = (this.data.current / this.data.max) * 0.6;
      this.healthBar.setAttribute('geometry', 'width', width);
    },
    respawnPlayer: function () {
      this.el.setAttribute('position', '0 1.6 0');
      this.data.current = this.data.max;
      this.updateBar();
    }
  });

  AFRAME.registerComponent('slime-ai', {
    schema: {
      speed: {type: 'number', default: 0.01},
      attackDistance: {type: 'number', default: 1},
      attackCooldown: {type: 'number', default: 2000}
    },
    init: function () {
      this.player = document.querySelector('#rig');
      this.lastAttackTime = 0;
      this.dead = false;
      this.health = 2;
      this.healthBar = this.el.querySelector('#slime-healthbar');

      const sword = document.querySelector('#sword');
      sword.addEventListener('collision', (e) => {
        const target = e.detail.body.el;
        if (target === this.el && !this.dead) {
          this.health -= 1;
          this.updateSlimeBar();
          if (this.health <= 0) this.killSlime();
        }
      });
    },

    tick: function (time, deltaTime) {
      if (this.dead) return;

      const playerPos = this.player.object3D.position;
      const slimePos = this.el.object3D.position;
      const dist = slimePos.distanceTo(playerPos);

      if (dist < 4) {
        const dir = new THREE.Vector3().subVectors(playerPos, slimePos).normalize();
        this.el.object3D.position.addScaledVector(dir, this.data.speed * deltaTime);
      }

      if (dist < this.data.attackDistance && time > this.lastAttackTime + this.data.attackCooldown) {
        this.attackPlayer();
        this.lastAttackTime = time;
      }
    },

    attackPlayer: function () {
      this.player.emit('player-hit', { damage: 1 });
    },

    updateSlimeBar: function () {
      const width = (this.health / 2) * 0.2;
      this.healthBar.setAttribute('geometry', 'width', width);
    },

    killSlime: function () {
      this.dead = true;
      this.el.setAttribute('visible', false);
      this.el.removeAttribute('dynamic-body');
      setTimeout(() => {
        const newX = Math.random() * 10 - 5;
        const newZ = Math.random() * 10 - 5;
        this.el.setAttribute('position', `${newX} 0.5 ${newZ}`);
        this.el.setAttribute('visible', true);
        this.el.setAttribute('dynamic-body', '');
        this.health = 2;
        this.updateSlimeBar();
        this.dead = false;
      }, 3000);
    }
  });
</script>

</a-scene>
</body>
</html>

      <a-entity id="wall"ply-model="src: wall.ply" position="3.18 0 6.02" rotation="-90 0 0"></a-entity>
      <a-entity id="wall3"ply-model="src: wall3.ply" position="3.13673 0 6.00004" rotation="-90 0 0"></a-entity>
      <a-entity id="wall3"ply-model="src: wall3.ply" position="-2.8884 0 4.46061" rotation="-90 180 0"></a-entity>      
      <a-entity id="wall3"ply-model="src: wall3.ply" position="-2.8884 0 4.46061" rotation="-90 180 0"></a-entity>
      <a-entity id="wall"ply-model="src: wall.ply" position="-3.07 0 4.47" rotation="-90 180 0"></a-entity>
      <a-entity id="door holder"ply-model="src: door holder.ply" position="3.18867 0 6.12" rotation="-90 0 0"></a-entity>
      <a-entity id="door holder2"ply-model="src: door holder2.ply" position="3.13701 0 6.09954" rotation="-90 0 0"></a-entity>
      <a-entity id="door holder2"ply-model="src: door holder2.ply" position="-3.01097 0 4.361" rotation="-90 180 0"></a-entity>
      <a-entity id="door holder"ply-model="src: door holder.ply" position="-3.03768 0 4.361" rotation="-90 180 0"></a-entity>
      <a-entity id="lake2"ply-model="src: lake2.ply" position="2.59 -0.17 -6.45" rotation="-90 0 0"></a-entity> 
      <a-entity id="lake" ply-model="src: lake.ply" position="2.5 -0.17 16.24555" rotation="-90 0 0"></a-entity>
      <a-entity id="lake2 "ply-model="src: lake2.ply" position="2.56 -0.17 -12.17" rotation="-90 0 0"></a-entity>
      <a-entity id="lake2" ply-model="src: lake2.ply" position="-2.35979 -0.17 4.09536" rotation="-90 180 0"></a-entity>
      <a-entity id="lake" ply-model="src: lake.ply" position="-2.34405 -0.17 4.63875" rotation="-90 180 0"></a-entity>
      <a-entity id="lake" ply-model="src: lake.ply" position="-2.39399 -0.14 -13.65844" rotation="-90 180 0"></a-entity>
      <a-entity id="lake" ply-model="src: lake.ply" position="-2.39399 -0.14 12.34796" rotation="-90 180 0"></a-entity>
      <a-entity id="trees" ply-model="src: trees.ply" position="53.082 -0.170 -0.97238" rotation="-90 0 0"></a-entity>
      <a-entity id="trees" ply-model="src: trees.ply" position="53.015 -0.170 -13.56916" rotation="-90 0 0"></a-entity>      
      <a-entity id="trees" ply-model="src: trees.ply" position="52.94836 -0.170 -26.106" rotation="-90 0 0"></a-entity>
      <a-entity id="trees" ply-model="src: trees.ply" position="40.39836 -0.170 -26.106" rotation="-90 0 0"></a-entity>
      <a-entity id="trees" ply-model="src: trees.ply" position="15.28836 -0.170 -26.106" rotation="-90 0 0"></a-entity>
      <a-entity id="trees" ply-model="src: trees.ply" position="2.928 -0.170 -26.106" rotation="-90 0 0"></a-entity>
      <a-entity id="trees" ply-model="src: trees.ply" position="3.18 -0.170 -13.89033" rotation="-90 0 0"></a-entity>
      <a-entity id="trees" ply-model="src: trees.ply" position="2.928 -0.170 -1.45774" rotation="-90 0 0"></a-entity>
      <a-entity id="trees" ply-model="src: trees.ply" position="2.928 -0.170 10.86639" rotation="-90 0 0"></a-entity>
      <a-entity id="trees" ply-model="src: trees.ply" position="2.938 -0.170 23.42639" rotation="-90 0 0"></a-entity>
      <a-entity id="trees" ply-model="src: trees.ply" position="53.082 -0.170 11.56762" rotation="-90 0 0"></a-entity>
      <a-entity id="trees" ply-model="src: trees.ply" position="53.082 -0.170 24.14" rotation="-90 0 0"></a-entity>
      <a-entity id="trees" ply-model="src: trees.ply" position="15.498 -0.170 23.42639" rotation="-90 0 0"></a-entity>
      <a-entity id="trees" ply-model="src: trees.ply" position="40.59 -0.170 23.42639" rotation="-90 0 0"></a-entity>
      <a-entity id="plain" ply-model="src: floor (2).ply" position="27.79487 -0.17 98.937" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="28.36487 -0.170 98.84655" rotation="-90 0 0"></a-entity>
      <a-entity id="road" ply-model="src: road.ply" position="9.285 -6.51512 43.81736" rotation="-90 0 0" scale="1.03 1 1"></a-entity>
      <a-entity id="road" ply-model="src: road.ply" position="9.285 -6.515 54.1396" rotation="-90 0 0" scale="1.03 1 1"></a-entity>
      <a-entity id="road-4" ply-model="src: road.ply" position="9.57066 -6.45001 -8.23922" rotation="-90 0 0" scale="1.09 1 1"></a-entity>
      <a-entity id="road-1" ply-model="src: City (House) - Copy.ply" position="9.26384 -6.40219 31.3041" rotation="-90 0 0" scale="1.03 1.15 1"></a-entity>
      <a-entity id="road-2" ply-model="src: City (House) - Copy.ply" position="8.90032 -6.582 11.38064" rotation="-90 0 0" scale="1 0.93 1"></a-entity>
      <a-entity id="road-3" ply-model="src: City (House) - Copy.ply" position="9.57939 -6.4503 -6.07224" rotation="-90 0 0" scale="1.09 0.2 1"></a-entity>
      
      
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="3.44487 -0.170 98.85655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="-8.96 -0.170 98.85655" rotation="-90 0 0" scale="1.02 1 1"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="40.70487 -0.170 111.42655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="28.15487 -0.170 111.42655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="-9.35 -0.170 111.42655" rotation="-90 0 0"></a-entity>
      <a-entity id="plain" ply-model="src: floor (2).ply" position="-1.42 -0.170 169.49" rotation="-90 0 0" scale="2 2 1"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="-9.35 -0.170 123.99655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="28.3 -0.170 123.99655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="40.88 -0.170 123.99655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="-9.35 -0.170 136.53655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="3.19 -0.170 136.53655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="40.78 -0.170 136.53655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="28.22 -0.170 136.53655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="-21.8077 -0.17 136.53655" rotation="-90 0 0"></a-entity>      
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="53.3936 -0.17 136.53655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="53.3936 -0.17 124.01655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="53.3136 -0.17 111.44655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="53.2736 -0.17 98.86655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="53.2936 -0.17 86.39655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="53.2236 -0.17 73.79655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="53.2336 -0.17 61.19" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="53.2436 -0.17 48.59" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="53.13836 -0.17 36.84" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="-21.8077 -0.17 123.92655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="-21.8077 -0.17 111.34655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="-21.8077 -0.17 98.85655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="-21.8077 -0.17 86.26" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="-21.8077 -0.17 73.69" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="-21.8077 -0.17 61.06" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="-21.8077 -0.17 48.48" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="-21.8077 -0.17 36.65" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees" ply-model="src: deep tree.ply" position="15.62 -0.170 136.53655" rotation="-90 0 0"></a-entity>
      <a-entity id="deep trees-2" ply-model="src: deep tree.ply" position="-21.8077 -0.17 24.37538" rotation="-90 0 0"></a-entity>
     
     
     
      <a-entity id="huge tree top" ply-model="src: huge tree top.ply" position="-12.52 3.26 134.51" rotation="-90 0 0" scale="1.5 1.5 1"></a-entity>
      <a-entity id="huge tree bottom" ply-model="src: hudge tree bottom.ply" position="-9.72 -0.36 111.41" rotation="-90 0 0" scale="1 1 1.35"></a-entity>
      <a-entity id="deep plain" ply-model="src: floor (2).ply" position="6.76 -0.17 82.66" rotation="-90 0 0" scale="3 1.14 1"></a-entity>
      <a-entity id="house1" ply-model="src: house 1.ply" position="3.07021 -1.67861 3.89968" rotation="-90 -90 90" scale="0.8 0.8 1"></a-entity>
      <a-entity id="house1" ply-model="src: house 1.ply" position="3.07021 -1.67861 1.94968" rotation="-90 -90 90" scale="0.8 0.8 1"></a-entity>
      <a-entity id="house1" ply-model="src: house 1.ply" position="3.07021 -1.67861 5.85968" rotation="-90 -90 90" scale="0.8 0.8 1"></a-entity>
      <a-entity id="house1" ply-model="src: house 1.ply" position="1.24958 -1.73744 7.7873" rotation="-90 -90 90" scale="1.31 0.8 1"></a-entity>      
      <a-entity id="waterfountain" ply-model="src: waterfountain.ply" position="-3.63 -0.936 8.8" rotation="-90 0 0" scale="0.6 0.6 0.6"></a-entity>
      <a-entity id="bench-1" ply-model="src: bench.ply" position="-0.19405 -0.59 7.34046" rotation="-90 90 0" scale="0.5 0.41 0.41"></a-entity>
      <a-entity id="bench-2" ply-model="src: bench.ply" position="-0.19405 -0.59 5.91555" rotation="-90 90 0" scale="0.5 0.41 0.41"></a-entity>
      <a-entity id="bench-3" ply-model="src: bench.ply" position="0.21595 -0.59 2.17871" rotation="-90 -90 0" scale="0.5 0.41 0.41"></a-entity>
      <a-entity id="bench-4" ply-model="src: bench.ply" position="0.21595 -0.59 3.67484" rotation="-90 -90 0" scale="0.5 0.41 0.41"></a-entity>
      <a-entity id="Rubbish Bin-1" ply-model="src: Rubish Bin.ply" position="-0.86046 -0.30635 5.973" rotation="-90 90 0" scale="0.3 0.3 0.3"></a-entity>
      <a-entity id="Rubish Bin-2" ply-model="src: Rubish Bin.ply" position="3.34129 -0.306 5.973" rotation="-90 90 0" scale="0.3 0.3 0.3"></a-entity>
     
      <a-entity id="Road Light Pole-1" ply-model="src: Road light pole.ply" position="-0.89131 -0.70064 4.13198" rotation="-90 90 0" scale="0.5 0.5 0.5"></a-entity>
      <a-box position="-1.77187 1.62549 6.20633" color="yellow" material="" geometry="" scale="0.14 0.1 0.15" id="Bulb-1" light="color: #f5ec00; intensity: 0.15; type: point" animation__light="" intensity="dir:  alternate;  dur:  60000;  from:  0.15;  property:  light intensity ;  startEvents:  ;  pauseEvents:  ;  resumeEvents:  ;  to:  0 loop= true"></a-box>

      <a-entity id="Road Light Pole-2" ply-model="src: Road light pole.ply" position="-0.89131 -0.70064 7.03198" rotation="-90 90 0" scale="0.5 0.5 0.5"></a-entity>
      <a-box position="-1.77187 1.62347 3.30444" color="yellow" material="" geometry="" scale="0.14 0.1 0.15" id="Bulb-2" light="color: #f5ec00; intensity: 0.15; type: point" animation__light="" intensity="dir:  alternate;  dur:  60000;  from:  0.15;  property:  light intensity ;  startEvents:  ;  pauseEvents:  ;  resumeEvents:  ;  to:  0 loop= true"></a-box>

      <a-entity id="Road Light Pole-3" ply-model="src: Road light pole.ply" position="0.92772 -0.70064 5.392" rotation="-90 -90 0" scale="0.5 0.5 0.5"></a-entity>
      <a-box position="1.80269 1.62569 6.21628" color="yellow" material="" geometry="" scale="0.14 0.1 0.15" id="Bulb-3" light="color: #f5ec00; intensity: 0.15; type: point" animation__light="" intensity="dir:  alternate;  dur:  60000;  from:  0.15;  property:  light intensity ;  startEvents:  ;  pauseEvents:  ;  resumeEvents:  ;  to:  0 loop= true"></a-box>

      <a-entity id="Road Light Pole-4" ply-model="src: Road light pole.ply" position="0.928 -0.70064 2.472" rotation="-90 -90 0" scale="0.5 0.5 0.5"></a-entity>      
      <a-box position="1.80269 1.62606 3.29616" color="yellow" material="" geometry="" scale="0.14 0.1 0.15" id="Bulb-4" light="color: #f5ec00; intensity: 0.15; type: point" animation__light="" intensity="dir:  alternate;  dur:  60000;  from:  0.15;  property:  light intensity ;  startEvents:  ;  pauseEvents:  ;  resumeEvents:  ;  to:  0 loop= true"></a-box>

      <a-entity id="Road Light Pole-5" ply-model="src: Road light pole.ply" position="0.34926 -0.57245 15.96235" rotation="-90 -90 0" scale="0.5 0.5 0.5"></a-entity>
      <a-box position="1.23585 1.73134 16.78814" color="yellow" material="" geometry="" scale="0.14 0.1 0.15" id="Bulb-5" light="color: #f5ec00; intensity: 0.3; type: point" animation__light="" intensity="dir:  alternate;  dur:  60000;  from:  0.30;  property:  light intensity ;  startEvents:  ;  pauseEvents:  ;  resumeEvents:  ;  to:  0 loop= true"></a-box>

      <a-entity id="Road Light Pole-6" ply-model="src: Road light pole.ply" position="0.05809 -0.572 17.56302" rotation="-90 90 0" scale="0.5 0.5 0.5"></a-entity>
      <a-box position="-0.83684 1.73134 16.73421" color="yellow" material="" geometry="" scale="0.14 0.1 0.15" id="Bulb-6" light="color: #f5ec00; intensity: 0.3; type: point" animation__light="" intensity="dir:  alternate;  dur:  60000;  from:  0.30;  property:  light intensity ;  startEvents:  ;  pauseEvents:  ;  resumeEvents:  ;  to:  0 loop= true"></a-box>

      <a-entity id="Road Light Pole-7" ply-model="src: Road light pole.ply" position="-0.20891 -0.6005 -5.62868" rotation="-90 90 0" scale="0.5 0.5 0.5"></a-entity>
      <a-box position="-1.09824 1.72224 -6.44877" color="yellow" material="" geometry="" scale="0.14 0.1 0.15" id="Bulb-7" light="color: #f5ec00; intensity: 0.25; type: point" animation__light="" intensity="dir:  alternate;  dur:  60000;  from:  0.25;  property:  light intensity ;  startEvents:  ;  pauseEvents:  ;  resumeEvents:  ;  to:  0 loop= true"></a-box>

      <a-entity id="Road Light Pole-8" ply-model="src: Road light pole.ply" position="0.17549 -0.5559 -7.40402" rotation="-90 -90 0" scale="0.5 0.5 0.5"></a-entity>
     
      <a-entity id="resturent" ply-model="src: resturent.ply" position="1.16599 -1.91678 9.87848" rotation="-90 90 0" scale=""></a-entity>
      
      
      <!---Comment Slime----> 
    <!-- Slime -->
    <a-entity class="slime" slime-ai position="2 0.5 -3">
      <!-- Outer jelly -->
      <a-entity ply-model="src: url(Slime Outter.ply)"
                material="color: green; transparent: true; opacity: 0.5">
      </a-entity>
      <!-- Inner core -->
      <a-entity ply-model="src: url(Slime Inner.ply)"
                material="color: lime">
      </a-entity>
      <!-- Health Bar -->
      <a-entity id="slime-healthbar" geometry="primitive: plane; height: 0.05; width: 0.2"
                material="color: red"
                position="0 0.6 0">
      </a-entity>
    </a-entity>

      <script>
        AFRAME.registerComponent('slime-ai', {
          schema: {
            speed: {type: 'number', default: 0.01}
          },
          init: function () {
            const el = this.el;
            const player = document.querySelector('#rig'); // Your VR rig
            const sword = document.querySelector('#sword');
      
            this.dead = false;
      
            // Setup idle bounce animation
            this.bounceUp = true;
            this.bounceTimer = 0;
      
            // Check collision with sword
            sword.addEventListener('collision', (e) => {
              const target = e.detail.body.el;
              if (target === el && !this.dead) {
                this.killSlime();
              }
            });
          },
      
          tick: function (time, deltaTime) {
            if (this.dead) return;
      
            const player = document.querySelector('#rig');
            if (!player) return;
      
            const slimePos = this.el.object3D.position;
            const playerPos = player.object3D.position;
      
            const dist = slimePos.distanceTo(playerPos);
      
            // If player is close, move toward them
            if (dist < 4) {
              const direction = new THREE.Vector3().subVectors(playerPos, slimePos).normalize();
              this.el.object3D.position.addScaledVector(direction, this.data.speed * deltaTime);
            }
      
            // Idle bounce
            this.bounceTimer += deltaTime;
            if (this.bounceTimer > 500) {
              this.bounceUp = !this.bounceUp;
              this.bounceTimer = 0;
            }
            const bounceY = this.bounceUp ? 0.52 : 0.48;
            this.el.object3D.position.y = bounceY;
          },
      
          killSlime: function () {
            this.dead = true;
            this.el.setAttribute('visible', false);
            this.el.removeAttribute('dynamic-body');
      
            // Respawn after 3 seconds
            setTimeout(() => {
              const newX = Math.random() * 10 - 5;
              const newZ = Math.random() * 10 - 5;
              this.el.setAttribute('position', `${newX} 0.5 ${newZ}`);
              this.el.setAttribute('visible', true);
              this.el.setAttribute('dynamic-body', '');
              this.dead = false;
            }, 3000);
          }
        });
      </script>
      




















      
        <!-- Rock (PLY model) -->
        <a-box id=3 radius="1.1" scale="1 0.7 1" position="27.6 0.6 46.5" material="color: #3a3a3a; roughness: 1; metalness: 0"></a-box>
        <a-box depth="1.2" height="0.8" width="0.6" position="27.40285 0.6 47.37866" rotation="18.95 -0.64 10" material="color: #3a3a3a; roughness: 1" geometry="" scale="1 1 0.87" id="5"></a-box>
        <!-- Side boulders -->
        
      <a-box id="1" depth="1.2" height="0.8" width="0.6" position="28.20397 1.17304 46.48131" rotation="" material="color: #3a3a3a; roughness: 1" geometry="" scale="0.52 1.4 1.25"></a-box>
      <a-box id="2" depth="1.2" height="0.8" width="0.6" position="27.570 0.6 45.83" rotation="20 29.999999999999996 10" material="color: #3a3a3a; roughness: 1" geometry=""></a-box>
      <a-box id="4" position="1.04913 1.77938 -6.5749" color="yellow" material="" geometry="" scale="0.14 0.1 0.15" id="Bulb-8" light="color: #f5ec00; intensity: 0.25; type: point" animation__light="" intensity="dir:  alternate;  dur:  60000;  from:  0.25;  property:  light intensity ;  startEvents:  ;  pauseEvents:  ;  resumeEvents:  ;  to:  0 loop= true"></a-box>
      <a-box id="6" depth="1.2" height="0.8" width="0.6" position="27.74983 0.48126 45.39594" rotation="41.2 29.999999999999996 14.2" material="color: #3a3a3a; roughness: 1" geometry=""></a-box>
      <a-box id="6" depth="1.2" height="0.8" width="0.6" position="27.74983 0.48126 45.39594" rotation="-41.2 -29.999999999999996 -14.2" material="color: #3a3a3a; roughness: 1" geometry=""></a-box>
      <a-tetrahedron id="7" radius="0.6" position="28.02916 0.58316 45.65131" rotation="10 59.99999999999999 0" material="color: #3a3a3a; roughness: 1" geometry=""></a-tetrahedron>
      <a-box id="8 " depth="1.2" height="0.8" width="0.6" position="27.89807 1.12304 47.33456" rotation="0 -57.89 0" material="color: #3a3a3a; roughness: 1" geometry="" scale="0.49 1.34 0.41"></a-box>
      <a-box id="9" depth="1.2" height="0.8" width="0.6" position="27.8124 1.00447 47.39105" rotation="0 -57.89 0" material="color: #3a3a3a; roughness: 1" geometry="" scale="0.49 1.34 0.41"></a-box>
      <a-box id="10" depth="1.2" height="0.8" width="0.6" position="27.82276 1.12304 45.61474" rotation="0 57.89 0" material="color: #3a3a3a; roughness: 1" geometry="" scale="0.49 1.34 0.41"></a-box>
      <a-box id="11" depth="1.2" height="0.8" width="0.6" position="27.82276 1.01043 45.61474" rotation="0 57.89 0" material="color: #3a3a3a; roughness: 1" geometry="" scale="0.49 1.34 0.41"></a-box>



      <!-- Sword (PLY model) -->
      
      <a-entity ply-model="src: Sword.ply" id="sword" position="27.31103 2.242 46.08717" scale="0.1 0.1 0.15" rotation="90 0 0" pullable-sword="" animation="property: position; to: 23.7 -26.2 23.1; easing: easeOutQuad" dynamic-body="" grabbable="" class="grabbable"></a-entity>
      <a-entity id="sword" class="weapon" ply-model="src: url(sword.ply)" dynamic-body stab-stick></a-entity>
      <script src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v4.0.1/dist/aframe-physics-system.min.js"></script>
            <script>
        AFRAME.registerComponent('pullable-sword', {
          init: function () {
            const sword = this.el;
            let pulled = false;
    
            sword.addEventListener('click', () => {
              if (!pulled) {
                pulled = true;
    
                // Animate upward pull (world position)
                sword.setAttribute('animation', {
                  property: 'position',
                  to: '23.7 -26.2 23.1', // pulled higher in Y
                  dur: 1000,
                  easing: 'easeOutQuad'
                });
    
                setTimeout(() => {
                  sword.removeAttribute('static-body');
                  sword.setAttribute('dynamic-body', '');
                  sword.setAttribute('grabbable', '');
                }, 1000);
              }
            });
          }
        });
    
        document.addEventListener('DOMContentLoaded', () => {
          document.querySelector('#sword').setAttribute('pullable-sword', '');
        });
      </script>
<!-- Magic particles -->
<a-entity id="pullParticles"
          particle-system="preset: dust; color: #00ffff, #ffffff; particleCount: 300; size: 2; duration: 0.3"
          position="0 0 0"
          visible="false">
</a-entity>

<!-- Sound effect -->
<a-sound id="pullSound"
         autoplay="false"
         position="0 0 0">
</a-sound>

<script>
  AFRAME.registerComponent('stab-stick', {
    init: function () {
      const el = this.el;
      const particle = el.querySelector('#pullParticles');
      const sound = el.querySelector('#pullSound');

      const rig = document.querySelector('#rig');
      const hand = rig.querySelector('[laser-controls][hand="right"]'); // adjust if using left hand

      let isStuck = true;

      el.addEventListener('grab-start', () => {
        if (!isStuck) return;

        // âœ¨ WORTHY: Fly to hand
        isStuck = false;

        // Release from stone
        el.removeAttribute('static-body');
        el.setAttribute('dynamic-body', 'mass: 1');

        // Add animation toward hand
        const handPos = new THREE.Vector3();
        hand.object3D.getWorldPosition(handPos);

        el.removeAttribute('animation__fly');
        el.setAttribute('animation__fly', {
          property: 'position',
          to: `${handPos.x} ${handPos.y} ${handPos.z}`,
          dur: 800,
          easing: 'easeOutCubic'
        });

        // Optionally rotate as it flies
        el.setAttribute('animation__spin', {
          property: 'rotation',
          to: '0 360 0',
          dur: 800
        });

        // Play effects
        if (particle) {
          particle.setAttribute('visible', 'true');
          setTimeout(() => particle.setAttribute('visible', 'false'), 1000);
        }

        if (sound) sound.components.sound.playSound();

        // Auto attach to hand after a delay
        setTimeout(() => {
          hand.emit('grab-start', { hand: hand }); // simulate pickup
        }, 800);
      });

      // Re-stick logic
      el.addEventListener('collision', (e) => {
        const contact = e.detail.body.el;
        if (!isStuck && contact && (contact.classList.contains('ground') || contact.classList.contains('tree'))) {
          el.setAttribute('dynamic-body', 'mass: 0');
          el.components['dynamic-body'].syncToPhysics();
          isStuck = true;
        }
      });
    }
  });
</script>










































      
      
      
      
      
      
      
      
      
      
       
          
        
    </a-scene>
  </body>
</html>
